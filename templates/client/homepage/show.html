<!doctype html>
<html lang="en">
  <head>
    <title>Lingua</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="Lingua project" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='client/styles/bootstrap4/bootstrap.min.css') }}" />
    <link href="{{ url_for('static', filename='client/plugins/font-awesome-4.7.0/css/font-awesome.min.css') }}" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='client/plugins/OwlCarousel2-2.2.1/owl.carousel.css') }}" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='client/plugins/OwlCarousel2-2.2.1/owl.theme.default.css') }}" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='client/plugins/OwlCarousel2-2.2.1/animate.css') }}" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='client/styles/main_styles.css') }}" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='client/styles/responsive.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='client/css/styles.css') }}" />
  </head>
  <body>
    <div class="super_container">
      <!-- header -->
      {% include "client/layout/header.html" %}

      <!-- Home -->

      <div>
        <div class="row">
          <div class="col text-center">
            <div class="home">
              <div class="home_background" style="background-image: linear-gradient(135deg, #667eea, #764ba2)"></div>

              <div class="home_content">
                <div class="container">
                  <div class="row justify-content-center">
                    <div class="col-lg-8 text-center">
                      <h1 class="home_title text-white">English Dictionary</h1>

                      <!-- SEARCH BOX -->
                      <div class="search-box shadow-lg p-4 rounded bg-white mt-4">
                        <div class="input-group mb-3">
                          <input type="text" id="searchWord" class="form-control form-control-lg" placeholder="Nhập từ tiếng Anh..." />
                          <button class="btn btn-primary btn-lg" onclick="searchWord()">Tra cứu</button>
                        </div>

                        <!-- RESULT -->
                        <div id="result" class="text-start d-none">
                          <h4>
                            <span id="resultWord"></span>
                            <button class="btn btn-outline-primary btn-sm ml-2" onclick="speakResult()">
                              <i class="fa-solid fa-volume-high"></i>
                            </button>
                          </h4>

                          <p class="text-muted" id="resultPhonetic"></p>
                          <p id="resultMeaning"></p>
                        </div>
                      </div>
                      <!-- END SEARCH BOX -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      {% include "client/layout/language.html" %} {% include "client/layout/instructor.html" %} {% include "client/layout/footer.html" %}
    </div>

    <script src="{{ url_for('static', filename='client/js/jquery-3.2.1.min.js') }}"></script>
    <script src="{{ url_for('static', filename='client/styles/bootstrap4/popper.js') }}"></script>
    <script src="{{ url_for('static', filename='client/styles/bootstrap4/bootstrap.min.js') }}"></script>
    <script src="{{ url_for('static', filename='client/plugins/OwlCarousel2-2.2.1/owl.carousel.js') }}"></script>
    <script src="{{ url_for('static', filename='client/plugins/easing/easing.js') }}"></script>
    <script src="{{ url_for('static', filename='client/js/custom.js') }}"></script>
    <script>
      let currentWord = '';

      function searchWord() {
        const word = document.getElementById('searchWord').value.trim();
        if (!word) return;

        fetch(`/api/dictionary?word=${word}`)
          .then((res) => res.json())
          .then((data) => {
            if (data.error) {
              alert('Không tìm thấy từ!');
              return;
            }

            currentWord = data.word;
            document.getElementById('result').classList.remove('d-none');
            document.getElementById('resultWord').innerText = data.word;
            document.getElementById('resultPhonetic').innerText = data.phonetic;
            document.getElementById('resultMeaning').innerText = data.meaning;
          });
      }

      function speakResult() {
        const utterance = new SpeechSynthesisUtterance(currentWord);
        utterance.lang = 'en-US';
        speechSynthesis.cancel();
        speechSynthesis.speak(utterance);
      }
    </script>
  </body>
</html>
